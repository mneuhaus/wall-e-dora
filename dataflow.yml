nodes:
  - id: power
    path: nodes/power/power/main.py
    inputs:
      tick: dora/timer/secs/10
    outputs:
      - voltage
      - current
      - power
      - soc
      - runtime
      - capacity
      - discharge_rate
      - shutdown

  - id: config
    path: nodes/config/config/main.py
    inputs:
      update_setting: web/update_setting
      tick: dora/timer/secs/5
    outputs:
      - setting_updated
      - settings

  - id: web
    path: nodes/web/web/main.py
    inputs:
      tick: dora/timer/millis/100
      voltage: power/voltage
      current: power/current
      power: power/power
      soc: power/soc
      runtime: power/runtime
      capacity: power/capacity
      discharge_rate: power/discharge_rate
      shutdown: power/shutdown
      available_sounds: audio/available_sounds
      servo_status: waveshare_servo/servo_status
      servos_list: waveshare_servo/servos_list
      setting_updated: config/setting_updated
      settings: config/settings
      # camera_feed: opencv-video-capture/image
    outputs:
      - slider_input
      - play_sound
      - set_volume
      - stop
      - GAMEPAD_LEFT_ANALOG_STICK_X
      - GAMEPAD_LEFT_ANALOG_STICK_Y
      - RIGHT_ANALOG_STICK_X
      - RIGHT_ANALOG_STICK_Y
      - FACE_1
      - FACE_2
      - FACE_3
      - FACE_4
      - LEFT_SHOULDER
      - RIGHT_SHOULDER
      - LEFT_SHOULDER_BOTTOM
      - RIGHT_SHOULDER_BOTTOM
      - SELECT
      - START
      - LEFT_ANALOG_BUTTON
      - RIGHT_ANALOG_BUTTON
      - DPAD_UP
      - DPAD_DOWN
      - DPAD_LEFT
      - DPAD_RIGHT
      - HOME
      - MISCBUTTON_1
      - MISCBUTTON_2
      - move_servo
      - wiggle_servo
      - calibrate_servo
      - update_servo_setting
      - update_setting

  - id: audio
    path: nodes/audio/audio/main.py
    inputs:
      play_sound: web/play_sound
      scan_sounds: dora/timer/secs/3
      volume_tick: dora/timer/secs/1
      set_volume: web/set_volume
      stop: web/stop
      setting_updated: config/setting_updated
    outputs:
      - available_sounds
      - volume

  - id: tracks
    path: nodes/tracks/tracks/main.py
    inputs:
      tick: dora/timer/millis/100
      heartbeat: dora/timer/secs/1
      LEFT_ANALOG_STICK_X: web/GAMEPAD_LEFT_ANALOG_STICK_X
      LEFT_ANALOG_STICK_Y: web/GAMEPAD_LEFT_ANALOG_STICK_Y
      setting_updated: config/setting_updated

  - id: waveshare_servo
    path: nodes/waveshare_servo/entrypoint.py
    inputs:
      tick: dora/timer/secs/3
      move_servo: web/move_servo
      wiggle_servo: web/wiggle_servo
      calibrate_servo: web/calibrate_servo
      update_servo_setting: web/update_servo_setting
    outputs:
      - servo_status
      - servos_list

  # - id: opencv-video-capture
  #   build: pip install opencv-video-capture
  #   path: opencv-video-capture
  #   inputs:
  #     tick: dora/timer/secs/3
  #   outputs:
  #     - image

  # - id: dora-rerun
  #   path: /home/mneuhaus/dora/node-hub/dora-rerun
  #   build: pip install /home/mneuhaus/dora/node-hub/dora-rerun
  #   inputs:
  #     image: opencv-video-capture/image

